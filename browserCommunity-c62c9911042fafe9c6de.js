!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4e12c115-817a-4793-9468-a3c4694de080",e._sentryDebugIdIdentifier="sentry-dbid-4e12c115-817a-4793-9468-a3c4694de080")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"3ae18205e144817c98fea0ce94c372b9b5faea00"},(()=>{"use strict";var e,t,r,n={89546:(e,t,r)=>{(0,r(24838).y)()},83537:(e,t,r)=>{r(491),r(45271)},69345:(e,t,r)=>{r.d(t,{TA:()=>s,es:()=>a});var n=r(491);const s=(e,t)=>new o(e,t);class o{firestore;auth;constructor(e,t){this.firestore=e,this.auth=t}get songDataCollection(){return a(this.firestore)}songDataRef(e){return(0,n.H9)(this.songDataCollection,e)}async create(e){if(null===this.auth.currentUser)throw new Error("You must be logged in to save songs to the cloud");const t=this.auth.currentUser.uid,r=(0,n.H9)(this.songDataCollection);return await(0,n.c4)(this.firestore,(async s=>{s.set(r,{createdAt:(0,n.O5)(),updatedAt:(0,n.O5)(),data:n.Ix.fromUint8Array(e.data),userId:t})})),r.id}async get(e){const t=this.songDataRef(e),r=await(0,n.x7)(t),s=r.data()?.data;if(void 0===s)throw new Error("Song data does not exist");return s.toUint8Array()}async update(e,t){const r=this.songDataRef(e);await(0,n.c4)(this.firestore,(async e=>{e.update(r,{updatedAt:(0,n.O5)(),data:n.Ix.fromUint8Array(t.data)})}))}async publish(e){const t=this.songDataRef(e);await(0,n.c4)(this.firestore,(async e=>{e.update(t,{isPublic:!0})}))}async unpublish(e){const t=this.songDataRef(e);await(0,n.c4)(this.firestore,(async e=>{e.update(t,{isPublic:!1})}))}async delete(e){await(0,n.c4)(this.firestore,(async t=>{t.delete(this.songDataRef(e))}))}}const i={fromFirestore:(e,t)=>e.data(t),toFirestore:e=>e},a=e=>(0,n.rJ)(e,"songData").withConverter(i)},34865:(e,t,r)=>{r.d(t,{X:()=>i});var n=r(491),s=r(69345),o=r(41862);const i=(e,t)=>new a(e,t);class a{firestore;auth;constructor(e,t){this.firestore=e,this.auth=t}get songCollection(){return d(this.firestore)}songRef(e){return(0,n.H9)(this.songCollection,e)}async get(e){const t=await(0,n.x7)(this.songRef(e));return t.exists()?l(t):null}async create(e){if(null===this.auth.currentUser)throw new Error("You must be logged in to save songs to the cloud");const t=this.auth.currentUser.uid,r=(0,n.H9)((0,s.es)(this.firestore),e.songDataId),o=(0,n.H9)(this.songCollection);return await(0,n.c4)(this.firestore,(async s=>{s.set(o,{name:e.name,createdAt:(0,n.O5)(),updatedAt:(0,n.O5)(),dataRef:r,userId:t})})),o.id}async update(e,t){const r=this.songRef(e);await(0,n.c4)(this.firestore,(async e=>{e.update(r,{updatedAt:(0,n.O5)(),name:t.name})}))}async delete(e){await(0,n.c4)(this.firestore,(async t=>{t.delete(this.songRef(e))}))}async publish(e,t){const r=this.songRef(e);await(0,n.c4)(this.firestore,(async e=>{e.update(r,{isPublic:!0,publishedAt:(0,n.O5)(),user:t})}))}async unpublish(e){const t=this.songRef(e);await(0,n.c4)(this.firestore,(async e=>{e.update(t,{isPublic:!1,publishedAt:null})}))}async getMySongs(){if(null===this.auth.currentUser)throw new Error("You must be logged in to get songs from the cloud");return(await(0,n.GG)((0,n.P)(this.songCollection,(0,n._M)("userId","==",this.auth.currentUser.uid),(0,n.My)("updatedAt","desc")))).docs.map(l)}async getPublicSongs(){const e=(0,n.P)(this.songCollection,(0,n._M)("isPublic","==",!0),(0,n.My)("publishedAt","desc"));return(await(0,n.GG)(e)).docs.map(l)}async getPublicSongsByUser(e){const t=(0,n.P)(this.songCollection,(0,n._M)("isPublic","==",!0),(0,n._M)("userId","==",e),(0,n.My)("publishedAt","desc"));return(await(0,n.GG)(t)).docs.map(l)}async incrementPlayCount(e){const t=this.songRef(e);await(0,n.c4)(this.firestore,(async e=>{e.update(t,{playCount:(0,n.GV)(1)})}))}}const l=e=>{const t=e.data();return{...t,id:e.id,songDataId:t.dataRef.id,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate(),publishedAt:t.publishedAt?.toDate(),user:t.user&&(0,o.n)(t.userId,t.user)}},c={fromFirestore:(e,t)=>e.data(t),toFirestore:e=>e},d=e=>(0,n.rJ)(e,"songs").withConverter(c)},41862:(e,t,r)=>{r.d(t,{_:()=>o,n:()=>a});var n=r(17354),s=r(491);const o=(e,t)=>new i(e,t);class i{firestore;auth;constructor(e,t){this.firestore=e,this.auth=t}get userCollection(){return(0,s.rJ)(this.firestore,"users").withConverter(c)}get userRef(){if(null===this.auth.currentUser)throw new Error("You must be logged in to get the current user");return(0,s.H9)(this.userCollection,this.auth.currentUser.uid)}async create(e){await(0,s.c4)(this.firestore,(async t=>{t.set(this.userRef,{name:e.name,bio:e.bio,createdAt:s.Dc.now(),updatedAt:s.Dc.now()})}))}async update(e){await(0,s.c4)(this.firestore,(async t=>{t.update(this.userRef,{name:e.name,bio:e.bio,updatedAt:s.Dc.now()})}))}async delete(){if(null===this.auth.currentUser)throw new Error("You must be logged in to delete the current user");await(0,s.c4)(this.firestore,(async e=>{e.delete(this.userRef)})),(0,n.hG)(this.auth.currentUser)}async getCurrentUser(){const e=await(0,s.x7)(this.userRef);return e.exists()?l(e):null}async get(e){const t=await(0,s.x7)((0,s.H9)(this.userCollection,e));return t.exists()?l(t):null}async getByUsername(e){const t=(0,s.P)(this.userCollection,(0,s._M)("name","==",e)),r=await(0,s.GG)(t);if(r.empty)return null;const n=r.docs[0];return l(n)}observeCurrentUser(e){try{return(0,s.aQ)(this.userRef,(t=>{t.exists()?e(l(t)):e(null)}))}catch(e){return console.warn(e),()=>{}}}observeAuthUser(e){return this.auth?.onAuthStateChanged((t=>{e(t)}))}}const a=(e,t)=>({id:e,name:t.name,bio:t.bio,createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate()}),l=e=>{const t=e.data();return a(e.id,t)},c={fromFirestore:(e,t)=>e.data(t),toFirestore:e=>e}},69825:(e,t,r)=>{r.d(t,{TA:()=>n.TA,XW:()=>s.X,_x:()=>o._}),r(83537);var n=r(69345),s=r(34865),o=r(41862)},35641:(e,t,r)=>{r.d(t,{HM:()=>i,m7:()=>s,zW:()=>a});const n=r(46177)(((e,t)=>e.incrementPlayCount(t)),5e3),s=e=>{let{songStore:t,player:r,cloudSongRepository:s,synth:o}=e;return async e=>{l(o),await t.loadSong(e),r.reset(),r.play();try{await n(s,e.id)}catch(e){console.error(e)}}},o=e=>t=>async()=>{const{songStore:r,communitySongStore:n}=t,o=r.currentSong;if(null===o)return;const i=n.songs.findIndex((e=>e.id===o.metadata.id)),a=i+e<0?n.songs.length-1:(i+e)%n.songs.length,l=n.songs[a];await s(t)(l)},i=o(-1),a=o(1),l=async e=>{e.isLoaded||(await e.setup(),await e.loadSoundFontFromURL("https://cdn.jsdelivr.net/gh/ryohey/signal@4569a31/public/A320U.sf2"))}},51349:(e,t,r)=>{r.d(t,{F:()=>d});var n=r(46287),s=r(62540),o=r(79478),i=r(32354);const a=(0,n.A)("div",{target:"em22p061"})("background:",(e=>{let{theme:t}=e;return t.secondaryBackgroundColor}),";display:flex;padding:1rem;border-radius:0.5rem;line-height:1.5;"),l=e=>{let{severity:t,...r}=e;switch(t){case"info":return(0,s.jsx)(i,{...r});case"warning":return(0,s.jsx)(o,{...r})}},c=(0,n.A)("div",{target:"em22p060"})({name:"to3ihi",styles:"flex-grow:1;display:flex;align-items:center"}),d=e=>{let{children:t,severity:r,...n}=e;return(0,s.jsxs)(a,{...n,children:[(0,s.jsx)(l,{severity:r,style:{marginRight:"1rem",flexShrink:"0"}}),(0,s.jsx)(c,{children:t})]})}},36396:(e,t,r)=>{r.d(t,{q:()=>g});var n=r(62540),s=r(83785),o=r(20994),i=r(98914),a=r(69768),l=r(94676),c=r(57852),d=r(27053),u=r(43145),h=r(21086);const g=()=>(0,n.jsx)(l.P.Provider,{value:new c.A,children:(0,n.jsx)(s.a,{theme:d.z,children:(0,n.jsx)(i.vd,{children:(0,n.jsxs)(o.tE,{component:a.y,children:[(0,n.jsx)(u.r,{}),(0,n.jsx)(h.K,{})]})})})})},60327:(e,t,r)=>{r.d(t,{F:()=>c});var n=r(46287),s=r(62540),o=r(46834),i=r(67235),a=r(98107);const l=(0,n.A)(a.j,{target:"elohlgf0"})("background:",(e=>{let{theme:t}=e;return t.themeColor}),";&:hover{background:",(e=>{let{theme:t}=e;return t.themeColor}),";opacity:0.8;}&.active{background:",(e=>{let{theme:t}=e;return t.themeColor}),";}svg{width:1.5rem;height:1.5rem;}"),c=e=>{let{onMouseDown:t,isPlaying:r}=e;return(0,s.jsx)(l,{onMouseDown:t,className:r?"active":void 0,children:r?(0,s.jsx)(o,{}):(0,s.jsx)(i,{})})}},47841:(e,t,r)=>{r.d(t,{N:()=>f});var n=r(46287),s=r(62540),o=r(20994),i=r(21474),a=r(91114),l=r(69229),c=r(35641),d=r(94676),u=r(77484),h=r(98107),g=r(42233);const m=(0,n.A)("div",{target:"esy6vjs1"})("border-top:1px solid ",(e=>{let{theme:t}=e;return t.dividerColor}),";padding:1rem 0;"),p=(0,n.A)("div",{target:"esy6vjs0"})({name:"djywva",styles:"width:80%;max-width:60rem;margin:0 auto;display:flex;align-items:center"}),f=(0,l.PA)((()=>{const e=(0,d.g)(),{player:t,songStore:{currentSong:r}}=e,n=(0,o.dj)();return(0,s.jsx)(m,{children:(0,s.jsxs)(p,{children:[(0,s.jsx)(h.j,{onClick:()=>{try{(0,c.HM)(e)()}catch(e){n.error(`Failed to play: ${e.message}`)}},children:(0,s.jsx)(a,{})}),(0,s.jsx)(g.D,{isPlaying:t.isPlaying,onMouseDown:()=>{t.isPlaying?t.stop():t.play()}}),(0,s.jsx)(h.j,{onClick:()=>{try{(0,c.zW)(e)()}catch(e){n.error(`Failed to play: ${e.message}`)}},style:{marginRight:"1rem"},children:(0,s.jsx)(i,{})}),r&&(0,s.jsx)(u.g,{song:r.metadata})]})})}))},77484:(e,t,r)=>{r.d(t,{g:()=>d});var n=r(46287),s=r(62540),o=r(48302),i=r(53902);const a=(0,n.A)("div",{target:"e1s7poog2"})({name:"whluus",styles:"display:flex;align-items:center;flex-grow:1;width:15rem;flex-shrink:0"}),l=(0,n.A)("a",{target:"e1s7poog1"})("display:flex;align-items:center;color:",(e=>{let{theme:t}=e;return t.secondaryTextColor}),";font-size:90%;text-decoration:none;&:hover{text-decoration:underline;}"),c=(0,n.A)("a",{target:"e1s7poog0"})("color:",(e=>{let{theme:t}=e;return t.textColor}),";display:block;font-weight:600;font-size:130%;text-decoration:none;&:hover{text-decoration:underline;}"),d=e=>{let{song:t}=e;return(0,s.jsx)(a,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(o.N_,{href:`/songs/${t.id}`,style:{color:"currentColor",textDecoration:"none"},children:(0,s.jsx)(c,{children:t.name.length>0?t.name:(0,s.jsx)(i.Oj,{name:"untitled-song"})})}),t.user&&(0,s.jsx)(o.N_,{href:`/users/${t.user.id}`,style:{color:"currentColor",textDecoration:"none"},children:(0,s.jsx)(l,{children:t.user.name})})]})})}},68583:(e,t,r)=>{r.d(t,{$:()=>o,j:()=>i});var n=r(46287),s=r(44308);const o=(0,n.A)("button",{target:"efc8wua1"})("display:flex;align-items:center;background:transparent;border:none;border-radius:0.2rem;color:",(e=>{let{theme:t}=e;return t.textColor}),";padding:0.5rem 1rem;cursor:pointer;height:2rem;outline:none;font-size:0.8rem;&:hover{background:",(e=>{let{theme:t}=e;return t.highlightColor}),";}&:active{background:",(e=>{let{theme:t}=e;return s(t.secondaryBackgroundColor).lighten(.1).hex()}),";}"),i=(0,n.A)(o,{target:"efc8wua0"})("background:",(e=>{let{theme:t}=e;return t.themeColor}),";&:hover{background:",(e=>{let{theme:t}=e;return s(t.themeColor).darken(.1).hex()}),";}&:active{background:",(e=>{let{theme:t}=e;return s(t.themeColor).darken(.2).hex()}),";}")},98107:(e,t,r)=>{r.d(t,{j:()=>n});const n=(0,r(46287).A)("div",{target:"e6v1pl70"})("--webkit-appearance:none;outline:none;border:none;border-radius:100%;margin:0.25rem;padding:0.4rem;color:",(e=>{let{theme:t}=e;return t.textColor}),";display:flex;align-items:center;justify-content:center;cursor:pointer;&:hover{background:",(e=>{let{theme:t}=e;return t.highlightColor}),";}svg{width:1.2rem;height:1.2rem;}")},349:(e,t,r)=>{r.d(t,{P:()=>i});var n=r(62540),s=r(83785),o=r(34446);const i=e=>{let{size:t="2rem"}=e;const r=(0,s.u)();return(0,n.jsx)(o.A,{style:{width:t,height:t},color:r.themeColor})}},15595:(e,t,r)=>{r.d(t,{D:()=>h});var n=r(46287),s=r(62540),o=r(20994),i=r(63696),a=r(53902),l=r(68583);const c=(0,n.A)("div",{target:"ep6jyqe2"})({name:"5thnkd",styles:"display:flex;flex-grow:1"}),d=(0,n.A)("input",{target:"ep6jyqe1"})({name:"1fuj9tb",styles:"flex-grow:1;border:none;border-radius:0.2rem;padding:0.5rem 1rem;font-size:0.8rem;outline:none;margin-right:0.5rem"}),u=(0,n.A)("div",{target:"ep6jyqe0"})(""),h=e=>{let{text:t}=e;const r=(0,o.dj)(),n=(0,a.B2)(),h=(0,i.useCallback)((()=>{navigator.clipboard.writeText(t),r.success(n.copied)}),[t]);return(0,s.jsxs)(c,{children:[(0,s.jsx)(d,{type:"text",value:t,readOnly:!0,onFocus:e=>{e.target.select()}}),(0,s.jsx)(u,{children:(0,s.jsx)(l.j,{onClick:h,children:(0,s.jsx)(a.Oj,{name:"copy"})})})]})}},82923:(e,t,r)=>{r.d(t,{Cf:()=>g,L3:()=>h,ii:()=>m,lG:()=>u});var n=r(46287),s=r(62540),o=r(91785),i=r(13600);const a=o.i7`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,l=o.i7`
  from {
    opacity: 0;
    transform: translate(-50%, -48%) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
`,c=(0,n.A)(i.hJ,{target:"e98k4yu4"})("background-color:rgba(0, 0, 0, 0.3);position:fixed;inset:0;animation:",a," 150ms cubic-bezier(0.16, 1, 0.3, 1);"),d=(0,n.A)(i.UC,{target:"e98k4yu3"})("background-color:",(e=>{let{theme:t}=e;return t.backgroundColor}),";border-radius:0.5rem;box-shadow:0 0.5rem 3rem ",(e=>{let{theme:t}=e;return t.shadowColor}),";position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);margin-bottom:1rem;max-width:30rem;max-height:85vh;padding:1rem;animation:",l," 150ms cubic-bezier(0.16, 1, 0.3, 1);display:flex;flex-direction:column;pointer-events:auto;overflow:hidden;&:focus{outline:none;}"),u=e=>{let{children:t,style:r,...n}=e;return(0,s.jsx)(i.bL,{...n,children:(0,s.jsxs)(i.ZL,{children:[(0,s.jsx)(c,{}),(0,s.jsx)(d,{style:r,children:t})]})})},h=(0,n.A)("div",{target:"e98k4yu2"})("font-size:1.25rem;color:",(e=>{let{theme:t}=e;return t.textColor}),";margin-bottom:1.5rem;"),g=(0,n.A)("div",{target:"e98k4yu1"})({name:"4v81tc",styles:"overflow-x:hidden;overflow-y:auto;margin-bottom:1rem"}),m=(0,n.A)("div",{target:"e98k4yu0"})({name:"1mcgwxs",styles:"display:flex;justify-content:flex-end;&>*:not(:last-child){margin-right:1rem;}"})},43145:(e,t,r)=>{r.d(t,{r:()=>i});var n=r(62540),s=r(83785),o=r(91785);const i=()=>{const e=(0,s.u)();return(0,n.jsx)(o.mL,{styles:(0,o.AH)("html{font-size:16px;}html,body{height:100%;margin:0;}body{-webkit-font-smoothing:subpixel-antialiased;color:",e.textColor,";background-color:",e.backgroundColor,";overscroll-behavior:none;font-family:",e.font,";font-size:0.75rem;}#root{height:100%;}.firebase-emulator-warning{width:auto!important;}","")})}},68668:(e,t,r)=>{r.d(t,{C:()=>l});var n=r(46287),s=r(62540),o=r(45432),i=r(15595);const a=(0,n.A)("div",{target:"e1rt90210"})({name:"106oewt",styles:"margin-top:1rem;display:grid;grid-template-columns:repeat(auto-fill, minmax(32px, 1fr));grid-gap:0.5rem;&>button:hover{opacity:0.8;}"}),l=e=>{let{url:t,text:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.D,{text:t}),(0,s.jsxs)(a,{children:[(0,s.jsx)(o.r6,{url:t,title:r,children:(0,s.jsx)(o.uv,{size:32,round:!0})}),(0,s.jsx)(o.uI,{url:t,children:(0,s.jsx)(o.ik,{size:32,round:!0})}),(0,s.jsx)(o.Kz,{url:t,title:r,children:(0,s.jsx)(o.Y4,{size:32,round:!0})}),(0,s.jsx)(o.rx,{url:t,title:r,children:(0,s.jsx)(o.Hu,{size:32,round:!0})}),(0,s.jsx)(o.mJ,{url:t,title:r,children:(0,s.jsx)(o.aT,{size:32,round:!0})}),(0,s.jsx)(o.Ot,{url:t,subject:"Check out this song on signal",children:(0,s.jsx)(o.aZ,{size:32,round:!0})})]})]})}},60176:(e,t,r)=>{r.d(t,{Dr:()=>d,W1:()=>l});var n=r(46287),s=r(62540),o=r(4955);const i=(0,n.A)(o.UC,{target:"e1chvvpz3"})("background:",(e=>{let{theme:t}=e;return t.secondaryBackgroundColor}),";border-radius:0.5rem;box-shadow:0 1rem 3rem ",(e=>{let{theme:t}=e;return t.shadowColor}),";border:1px solid ",(e=>{let{theme:t}=e;return t.backgroundColor}),";margin:0 1rem;padding:0.5rem 0;"),a=(0,n.A)("ul",{target:"e1chvvpz2"})({name:"v5al3",styles:"list-style:none;padding:0;margin:0"}),l=e=>{let{trigger:t,open:r,onOpenChange:n,children:l}=e;return(0,s.jsxs)(o.bL,{open:r,onOpenChange:n,children:[(0,s.jsx)(o.l9,{asChild:!0,children:t}),(0,s.jsx)(o.ZL,{children:(0,s.jsx)(i,{children:(0,s.jsx)(a,{children:l})})})]})},c=(0,n.A)("li",{target:"e1chvvpz1"})("font-size:0.8rem;color:",(e=>{let{theme:t,disabled:r}=e;return r?t.secondaryTextColor:t.textColor}),";display:flex;align-items:center;padding:0.5rem 1rem;pointer-events:",(e=>{let{disabled:t}=e;return t?"none":"auto"}),";cursor:pointer;&:hover{background:",(e=>{let{theme:t,disabled:r}=e;return r?"transparent":t.highlightColor}),";}"),d=e=>{let{children:t,...r}=e;return(0,s.jsx)(c,{...r,children:t})}},22385:(e,t,r)=>{r.d(t,{V:()=>y});var n=r(46287),s=(r(63696),r(62540)),o=r(44308),i=r(11364),a=r(69229),l=r(48302),c=r(53902),d=r(95692),u=function(e){return(0,s.jsxs)("svg",{...e,children:[(0,s.jsxs)("g",{clipPath:"url(#a)",children:[(0,s.jsx)("path",{d:"M167.961 76.653c2.335 1.785 4.566 3.124 6.695 4.017 2.129.893 4.292 1.339 6.489 1.339 2.266 0 3.914-.378 4.944-1.133 1.03-.755 1.545-1.82 1.545-3.193 0-.824-.309-1.545-.927-2.163-.549-.687-1.339-1.305-2.369-1.854-.961-.55-2.06-1.03-3.296-1.442-1.236-.48-2.506-.996-3.811-1.545a48.28 48.28 0 0 1-4.738-2.163 21.105 21.105 0 0 1-4.326-2.987 15.927 15.927 0 0 1-3.193-4.223c-.824-1.648-1.236-3.536-1.236-5.665 0-2.335.446-4.498 1.339-6.489a14.388 14.388 0 0 1 4.017-5.047c1.717-1.373 3.777-2.438 6.18-3.193 2.403-.824 5.081-1.236 8.034-1.236 3.914 0 7.347.687 10.3 2.06 2.953 1.305 5.528 2.781 7.725 4.429l-6.798 9.064c-1.854-1.373-3.674-2.438-5.459-3.193-1.785-.755-3.571-1.133-5.356-1.133-3.845 0-5.768 1.339-5.768 4.017 0 .824.275 1.545.824 2.163.549.55 1.27 1.064 2.163 1.545.961.48 2.026.961 3.193 1.442 1.236.412 2.506.858 3.811 1.339a43.38 43.38 0 0 1 4.841 2.163 17.587 17.587 0 0 1 4.429 2.884c1.373 1.167 2.472 2.61 3.296 4.326.824 1.648 1.236 3.64 1.236 5.974 0 2.335-.446 4.498-1.339 6.489-.893 1.991-2.232 3.742-4.017 5.253-1.785 1.442-3.983 2.61-6.592 3.502-2.609.824-5.631 1.236-9.064 1.236-3.365 0-6.832-.652-10.403-1.957-3.502-1.305-6.558-3.021-9.167-5.15l6.798-9.476Zm52.464-43.26c-2.541 0-4.635-.721-6.283-2.163-1.648-1.51-2.472-3.433-2.472-5.768s.824-4.223 2.472-5.665c1.648-1.442 3.742-2.163 6.283-2.163 2.609 0 4.704.721 6.283 2.163 1.648 1.442 2.472 3.33 2.472 5.665s-.824 4.257-2.472 5.768c-1.579 1.442-3.674 2.163-6.283 2.163Zm-7.519 7.519h15.141V92h-15.141V40.912Zm37.736 57.474c0 1.923 1.03 3.365 3.09 4.326 2.06 1.03 4.807 1.545 8.24 1.545s6.249-.618 8.446-1.854c2.197-1.167 3.296-2.644 3.296-4.429 0-1.58-.687-2.644-2.06-3.193-1.305-.55-3.227-.824-5.768-.824h-5.253c-1.785 0-3.227-.069-4.326-.206-1.099-.069-2.06-.206-2.884-.412-1.854 1.648-2.781 3.33-2.781 5.047Zm-12.463 2.369c0-4.12 2.438-7.553 7.313-10.3v-.412a11.467 11.467 0 0 1-3.399-3.399c-.893-1.373-1.339-3.124-1.339-5.253 0-1.854.549-3.605 1.648-5.253a15.467 15.467 0 0 1 4.12-4.326V71.4c-1.785-1.236-3.399-2.987-4.841-5.253-1.373-2.335-2.06-5.013-2.06-8.034 0-3.09.584-5.768 1.751-8.034 1.167-2.335 2.712-4.257 4.635-5.768 1.991-1.58 4.257-2.747 6.798-3.502a27.684 27.684 0 0 1 7.931-1.133c3.021 0 5.665.412 7.931 1.236h18.643v11.021h-8.137c.481.755.858 1.717 1.133 2.884.343 1.167.515 2.438.515 3.811 0 2.953-.515 5.528-1.545 7.725a14.933 14.933 0 0 1-4.326 5.356c-1.785 1.373-3.914 2.403-6.386 3.09-2.403.687-5.013 1.03-7.828 1.03-1.991 0-4.051-.343-6.18-1.03-.687.55-1.167 1.099-1.442 1.648-.275.55-.412 1.27-.412 2.163 0 1.305.549 2.266 1.648 2.884 1.167.618 3.193.927 6.077.927h8.24c6.317 0 11.124 1.03 14.42 3.09 3.365 1.991 5.047 5.287 5.047 9.888 0 2.678-.687 5.116-2.06 7.313-1.305 2.266-3.193 4.189-5.665 5.768-2.472 1.648-5.459 2.918-8.961 3.811-3.502.961-7.45 1.442-11.845 1.442-3.021 0-5.837-.275-8.446-.824-2.541-.481-4.807-1.236-6.798-2.266-1.923-1.03-3.433-2.369-4.532-4.017-1.099-1.648-1.648-3.605-1.648-5.871Zm22.557-34.093c1.991 0 3.639-.687 4.944-2.06 1.373-1.442 2.06-3.605 2.06-6.489 0-2.678-.687-4.704-2.06-6.077-1.305-1.442-2.953-2.163-4.944-2.163s-3.674.687-5.047 2.06c-1.305 1.373-1.957 3.433-1.957 6.18 0 2.884.652 5.047 1.957 6.489 1.373 1.373 3.056 2.06 5.047 2.06Zm35.141-25.75h12.36l1.03 6.489h.412a39.325 39.325 0 0 1 7.21-5.356c2.61-1.58 5.665-2.369 9.167-2.369 5.562 0 9.579 1.82 12.051 5.459 2.541 3.64 3.811 8.686 3.811 15.141V92h-15.141V62.233c0-3.708-.515-6.249-1.545-7.622-.961-1.373-2.54-2.06-4.738-2.06-1.922 0-3.57.446-4.944 1.339-1.373.824-2.884 2.026-4.532 3.605V92h-15.141V40.912Zm55.545 36.874c0-5.356 2.266-9.545 6.798-12.566 4.532-3.021 11.845-5.047 21.939-6.077-.138-2.266-.824-4.051-2.06-5.356-1.236-1.373-3.228-2.06-5.974-2.06-2.198 0-4.395.412-6.592 1.236-2.198.824-4.532 1.957-7.004 3.399l-5.356-9.991a54.081 54.081 0 0 1 10.3-4.841c3.639-1.236 7.484-1.854 11.536-1.854 6.592 0 11.604 1.888 15.038 5.665 3.502 3.708 5.253 9.51 5.253 17.407V92h-12.36l-1.133-5.253h-.309c-2.198 1.923-4.532 3.502-7.004 4.738-2.404 1.167-5.047 1.751-7.931 1.751-2.335 0-4.429-.412-6.283-1.236-1.854-.755-3.434-1.82-4.738-3.193a16.674 16.674 0 0 1-3.09-4.944c-.687-1.854-1.03-3.88-1.03-6.077Zm14.42-1.133c0 1.648.515 2.884 1.545 3.708 1.098.755 2.54 1.133 4.326 1.133 1.785 0 3.296-.378 4.532-1.133 1.236-.755 2.54-1.82 3.914-3.193v-8.961c-5.425.755-9.167 1.854-11.227 3.296-2.06 1.442-3.09 3.159-3.09 5.15Zm42.454-56.856h15.141V92h-15.141V19.797Z",fill:"#fff"}),(0,s.jsx)("circle",{cx:"68.5",cy:"60.5",r:"44.5",stroke:"#fff",strokeWidth:"10"}),(0,s.jsx)("circle",{cx:"47.323",cy:"73.019",r:"7.323",fill:"#fff"}),(0,s.jsx)("circle",{cx:"68.424",cy:"81.778",r:"7.323",fill:"#fff"}),(0,s.jsx)("ellipse",{cx:"89.987",cy:"73.019",rx:"7.886",ry:"7.323",fill:"#fff"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"a",children:(0,s.jsx)("path",{fill:"#fff",d:"M0 0h449v120H0z"})})})]})};u.defaultProps={width:"449",height:"120",fill:"none",xmlns:"http://www.w3.org/2000/svg"};const h=(0,n.A)("div",{target:"e1gmief44"})({name:"1jdu0rr",styles:"width:80%;max-width:60rem;margin:0 auto;display:flex;align-items:center;justify-content:space-between"}),g=(0,n.A)("div",{target:"e1gmief43"})({name:"1qe7lan",styles:"display:flex;cursor:pointer;&:hover{opacity:0.7;}"}),m=(0,n.A)("div",{target:"e1gmief42"})({name:"41ctuz",styles:"display:flex;align-items:center;height:5rem"}),p=(0,n.A)("div",{target:"e1gmief41"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),f=(0,n.A)("a",{target:"e1gmief40"})("display:flex;align-items:center;background:transparent;border:none;border-radius:0.2rem;color:",(e=>{let{theme:t}=e;return t.textColor}),";padding:0 0.5rem;cursor:pointer;height:2rem;outline:none;font-size:0.8rem;text-decoration:none;font-weight:600;margin-right:1rem;&:hover{background:",(e=>{let{theme:t}=e;return t.highlightColor}),";}&:active{background:",(e=>{let{theme:t}=e;return o(t.secondaryBackgroundColor).lighten(.1).hex()}),";}"),y=(0,a.PA)((()=>(0,s.jsx)(m,{children:(0,s.jsxs)(h,{children:[(0,s.jsx)(g,{children:(0,s.jsx)(l.N_,{href:"/home",children:(0,s.jsx)(u,{width:null,height:28,viewBox:"16 0 449 120"})})}),(0,s.jsxs)(p,{children:[(0,s.jsxs)(f,{href:"/edit",target:"_blank",children:[(0,s.jsx)(i,{size:"1rem",style:{marginRight:"0.5rem"}}),(0,s.jsx)(c.Oj,{name:"create-new"})]}),(0,s.jsx)(d.uF,{})]})]})})))},42233:(e,t,r)=>{r.d(t,{D:()=>c});var n=r(46287),s=r(62540),o=r(46834),i=r(67235),a=r(98107);const l=(0,n.A)(a.j,{target:"eajfk8s0"})("background:",(e=>{let{theme:t}=e;return t.themeColor}),";&:hover{background:",(e=>{let{theme:t}=e;return t.themeColor}),";opacity:0.8;}&.active{background:",(e=>{let{theme:t}=e;return t.themeColor}),";}"),c=(e,t)=>{let{onMouseDown:r,isPlaying:n}=e;return(0,s.jsx)(l,{id:"button-play",onMouseDown:r,className:n?"active":void 0,children:n?(0,s.jsx)(o,{}):(0,s.jsx)(i,{})})}},16757:(e,t,r)=>{r.d(t,{l:()=>u});var n=r(62540),s=r(20994),o=r(69229),i=r(63696),a=r(48509),l=r(94676),c=r(349),d=r(38946);const u=(0,o.PA)((()=>{const e=(0,l.g)(),{communitySongStore:t,cloudSongRepository:r}=e,o=(0,s.dj)(),[u,h]=(0,i.useState)(!0),[g,m]=(0,i.useState)([]);return(0,a.Z)((async()=>{try{const e=await r.getPublicSongs();t.songs=e,m(e)}catch(e){o.error(e.message)}finally{h(!1)}}),[]),u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.P,{})," Loading..."]}):(0,n.jsx)(d.M,{songs:g})}))},21086:(e,t,r)=>{r.d(t,{K:()=>h});var n=r(62540),s=r(69229),o=r(48302),i=r(11347),a=r(22709),l=r(18811),c=r(37917),d=r(42166);const u=(0,s.PA)((()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.qh,{path:"/home",component:a.Z}),(0,n.jsx)(o.qh,{path:"/profile",component:i.R}),(0,n.jsx)(o.qh,{path:"/users/:userId",children:e=>(0,n.jsx)(c.x,{userId:e.userId})}),(0,n.jsx)(o.qh,{path:"/songs/:songId",children:e=>(0,n.jsx)(l.x,{songId:e.songId})})]}))),h=(0,s.PA)((()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u,{}),(0,n.jsx)(d.L,{})]})))},67984:(e,t,r)=>{r.d(t,{G:()=>c});var n=r(62540),s=r(69229),o=r(53902),i=r(68583),a=r(82923),l=r(68668);const c=(0,s.PA)((e=>{let{song:t,open:r,onClose:s}=e;return(0,o.B2)(),(0,n.jsxs)(a.lG,{open:r,onOpenChange:s,style:{minWidth:"20rem"},children:[(0,n.jsx)(a.L3,{children:(0,n.jsx)(o.Oj,{name:"share"})}),(0,n.jsx)(a.Cf,{children:(0,n.jsx)(l.C,{url:d(t.id),text:`ðŸŽ¶ ${t.name} by ${t.user?.name} from @signalmidi\n#midi #signalmidi`})}),(0,n.jsx)(a.ii,{children:(0,n.jsx)(i.$,{onClick:s,children:(0,n.jsx)(o.Oj,{name:"close"})})})]})})),d=e=>`${window.location.origin}/songs/${e}`},42166:(e,t,r)=>{r.d(t,{L:()=>d});var n=r(62540),s=r(20994),o=r(69229),i=r(63696),a=r(94676),l=r(53902),c=r(65037);const d=(0,o.PA)((()=>{const e=(0,a.g)(),{rootViewStore:t,rootViewStore:{openSignInDialog:r}}=e,o=(0,s.dj)(),d=(0,l.B2)(),u=(0,i.useCallback)((()=>t.openSignInDialog=!1),[t]);return(0,n.jsx)(c.w,{open:r,onClose:u,onSuccess:async()=>{t.openSignInDialog=!1,o.success(d["success-sign-in"])},onFailure:e=>{console.warn(e)}})}))},65037:(e,t,r)=>{r.d(t,{w:()=>h});var n=r(46287),s=r(62540),o=r(82923),i=r(17354),a=r(11885),l=r(53902),c=r(68583),d=r(835);const u=(0,n.A)("span",{target:"ecak40p1"})("border:1px solid currentColor;font-size:0.8rem;padding:0.1rem 0.4rem;margin-left:1em;color:",(e=>{let{theme:t}=e;return t.secondaryTextColor}),";"),h=e=>{let{open:t,onClose:r,onSuccess:n,onFailure:h}=e;return(0,s.jsxs)(o.lG,{open:t,onOpenChange:r,style:{minWidth:"20rem"},children:[(0,s.jsxs)(o.L3,{children:[(0,s.jsx)(l.Oj,{name:"sign-in"}),(0,s.jsx)(u,{children:"Beta"})]}),(0,s.jsx)(o.Cf,{children:(0,s.jsx)(d.l,{uiConfig:{signInOptions:[i.HF.PROVIDER_ID,i.Dt.PROVIDER_ID,"apple.com"],callbacks:{signInSuccessWithAuthResult:()=>(n(),!1),signInFailure:h},signInFlow:"popup"},firebaseAuth:a.j2})}),(0,s.jsx)(o.ii,{children:(0,s.jsx)(c.$,{onClick:r,children:(0,s.jsx)(l.Oj,{name:"close"})})})]})}},38946:(e,t,r)=>{r.d(t,{M:()=>i});var n=r(62540),s=r(69229),o=r(65581);const i=(0,s.PA)((e=>{let{songs:t}=e;return 0===t.length?(0,n.jsx)("div",{children:"No songs"}):(0,n.jsx)(n.Fragment,{children:t.map((e=>(0,n.jsx)(o.$,{song:e},e.id)))})}))},65581:(e,t,r)=>{r.d(t,{$:()=>k});var n=r(46287),s=r(62540),o=r(20994),i=r(89472),a=r(46834),l=r(67235),c=r(69229),d=r(35641),u=r(92699),h=r(94676),g=r(53902);const m=(0,n.A)("div",{target:"e13b0bv88"})({name:"18keaja",styles:"display:flex;align-items:center;flex-grow:1"}),p=(0,n.A)("div",{target:"e13b0bv87"})("display:flex;align-items:center;color:",(e=>{let{theme:t}=e;return t.secondaryTextColor}),";font-size:90%;"),f=(0,n.A)("div",{target:"e13b0bv86"})({name:"p3szpz",styles:"word-break:break-all;font-weight:600;font-size:130%"}),y=(0,n.A)("div",{target:"e13b0bv85"})({name:"12s8779",styles:"width:2.5rem;height:2.5rem;display:flex;align-items:center;align-content:center;justify-content:center;margin-right:0.5rem;.arrow{display:none;}.circle{display:block;width:0.5rem;opacity:0.2;}"}),x=e=>{let{isPlaying:t}=e;return(0,s.jsx)(y,{children:t?(0,s.jsx)(a,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{className:"circle"}),(0,s.jsx)(l,{className:"arrow"})]})})},j=(0,n.A)("div",{target:"e13b0bv84"})("display:flex;padding:0.5rem 0;cursor:pointer;border-radius:0.5rem;&:hover{background:",(e=>{let{theme:t}=e;return t.highlightColor}),";.arrow{display:block;}.circle{display:none;}}"),v=(0,n.A)("div",{target:"e13b0bv83"})("display:flex;align-items:center;margin-right:1rem;color:",(e=>{let{theme:t}=e;return t.secondaryTextColor}),";"),b=(0,n.A)("div",{target:"e13b0bv82"})("display:flex;align-items:center;margin-right:1rem;color:",(e=>{let{theme:t}=e;return t.secondaryTextColor}),";flex-shrink:0;min-width:4rem;"),w=(0,n.A)("div",{target:"e13b0bv81"})("display:flex;align-items:center;padding:0.2rem 0.5rem;border-radius:0.5rem;background:",(e=>{let{theme:t}=e;return t.highlightColor}),";color:",(e=>{let{theme:t}=e;return t.textColor}),";font-size:90%;margin-right:0.5rem;"),C=(0,n.A)("div",{target:"e13b0bv80"})({name:"1rtggrv",styles:"display:flex;flex-direction:column;margin-right:1rem"}),k=(0,c.PA)((e=>{let{song:t}=e;const r=(0,h.g)(),{player:n,songStore:{currentSong:i}}=r,a=(0,o.dj)(),c=n.isPlaying&&i?.metadata.id===t.id;return(0,s.jsxs)(j,{onClick:()=>{if(n.isPlaying&&i?.metadata.id===t.id)n.stop();else try{(0,d.m7)(r)(t)}catch(e){a.error(`Failed to play: ${e.message}`)}},children:[(0,s.jsx)(x,{isPlaying:c}),(0,s.jsxs)(m,{children:[(0,s.jsxs)(C,{children:[(0,s.jsx)(f,{children:t.name.length>0?t.name:(0,s.jsx)(g.Oj,{name:"untitled-song"})}),(0,s.jsx)(p,{children:t.user?.name})]}),!t.isPublic&&(0,s.jsx)(w,{children:"Private"})]}),(0,s.jsxs)(v,{children:[(0,s.jsx)(l,{size:14,style:{marginRight:"0.25rem"}}),t.playCount??0]}),(0,s.jsx)(b,{children:(0,u.a)(t.updatedAt)})]})}))},835:(e,t,r)=>{r.d(t,{l:()=>o});var n=r(46287),s=r(77267);const o=(0,n.A)(s.S,{target:"e1rs7klc0"})("ul.firebaseui-idp-list{list-style-type:none;padding:0;}button.firebaseui-idp-button{display:flex;align-items:center;padding:0.5rem 1rem;border-radius:0.5rem;border:1px solid ",(e=>{let{theme:t}=e;return t.dividerColor}),";background:inherit!important;color:inherit;min-height:3rem;min-width:12rem;justify-content:center;cursor:pointer;&:hover{background:",(e=>{let{theme:t}=e;return t.highlightColor}),"!important;}}img.firebaseui-idp-icon{width:1.5rem;}span.firebaseui-idp-icon-wrapper{display:flex;margin-right:1rem;}span.firebaseui-idp-text.firebaseui-idp-text-short{display:none;}li.firebaseui-list-item{margin-bottom:1rem;display:flex;justify-content:center;}")},22073:(e,t,r)=>{r.d(t,{f:()=>n});const n=(0,r(46287).A)("textarea",{target:"e1776q6w0"})("display:block;appearance:none;border:none;background:inherit;border:1px solid ",(e=>{let{theme:t}=e;return t.dividerColor}),";border-radius:0.25rem;min-height:8em;padding:1rem 1rem;align-items:center;justify-content:center;color:inherit;font-size:1rem;font-family:inherit;outline:none;&:focus{border-color:",(e=>{let{theme:t}=e;return t.themeColor}),";}")},62158:(e,t,r)=>{r.d(t,{A:()=>n});const n=(0,r(46287).A)("input",{target:"ebynmjy0"})("display:block;appearance:none;border:none;background:inherit;border:1px solid ",(e=>{let{theme:t}=e;return t.dividerColor}),";border-radius:0.25rem;height:3rem;padding:0 1rem;align-items:center;justify-content:center;box-sizing:border-box;color:inherit;font-size:1rem;font-family:inherit;outline:none;&:focus{border-color:",(e=>{let{theme:t}=e;return t.themeColor}),";}")},69768:(e,t,r)=>{r.d(t,{y:()=>x});var n=r(46287),s=r(62540),o=r(91785),i=r(83785),a=r(22538),l=r(57890),c=r(79478),d=r(54112),u=r(32354),h=r(63696);const g=o.i7`
  from {
    opacity: 0;
    transform: translate(0, 0.5rem) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
`,m=o.i7`
  from {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
  to {
    opacity: 0;
    transform: translate(0, 0.5rem) scale(0.96);
  }
`,p=(0,n.A)(a.b,{target:"e165r2xf1"})({name:"sgtmti",styles:"position:fixed;bottom:2rem;left:0;right:0;display:flex"}),f=(0,n.A)("div",{target:"e165r2xf0"})("margin:0 auto;background:",(e=>{let{theme:t}=e;return t.secondaryBackgroundColor}),";padding:1rem;border-radius:0.5rem;font-size:0.8rem;box-shadow:0 0.5rem 3rem ",(e=>{let{theme:t}=e;return t.shadowColor}),";display:flex;align-items:center;animation:",(e=>{let{show:t}=e;return t?g:m})," 500ms cubic-bezier(0.16, 1, 0.3, 1) forwards;"),y=e=>{let{severity:t}=e;const r=(0,i.u)(),n=j(t,r);switch(t){case"error":return(0,s.jsx)(l,{style:{fill:n}});case"info":return(0,s.jsx)(u,{style:{fill:n}});case"success":return(0,s.jsx)(d,{style:{fill:n}});case"warning":return(0,s.jsx)(c,{style:{fill:n}})}},x=e=>{let{message:t,severity:r,onExited:n}=e;const[o,i]=(0,h.useState)(!0);return(0,h.useEffect)((()=>{const e=setTimeout((()=>i(!1)),4500),t=setTimeout(n,5e3);return()=>{clearTimeout(e),clearTimeout(t)}})),(0,s.jsx)(p,{children:(0,s.jsxs)(f,{show:o,children:[(0,s.jsx)(y,{severity:r}),(0,s.jsx)("div",{style:{width:"0.5rem"}}),t]})})},j=(e,t)=>{switch(e){case"error":return t.redColor;case"info":return t.textColor;case"success":return t.greenColor;case"warning":return t.yellowColor}}},95692:(e,t,r)=>{r.d(t,{uF:()=>y});var n=r(46287),s=r(62540),o=r(44308),i=r(83055),a=r(69229),l=r(63696),c=r(48302),d=r(11885),u=r(94676),h=r(53902),g=r(60176);const m={width:"1.3rem",height:"1.3rem",fill:"currentColor"},p=(0,n.A)("div",{target:"e1vbao051"})("display:flex;flex-direction:row;align-items:center;padding:0 0.5rem;height:2rem;font-size:0.75rem;border-radius:0.2rem;color:",(e=>{let{theme:t}=e;return t.secondaryTextColor}),";cursor:pointer;&:hover{background:",(e=>{let{theme:t}=e;return t.highlightColor}),";}&:active{background:",(e=>{let{theme:t}=e;return o(t.secondaryBackgroundColor).lighten(.1).hex()}),";}a{color:inherit;text-decoration:none;}"),f=(0,n.A)("span",{target:"e1vbao050"})({name:"11304en",styles:"margin-left:0.5rem;@media (max-width: 850px){display:none;}"}),y=(0,a.PA)((()=>{const e=(0,l.useRef)(null),{authStore:{authUser:t,user:r},rootViewStore:n}=(0,u.g)(),[o,a]=(0,c.zy)();return null===t?(0,s.jsxs)(p,{onClick:()=>{n.openSignInDialog=!0},children:[(0,s.jsx)(i,{style:m}),(0,s.jsx)(f,{children:(0,s.jsx)(h.Oj,{name:"sign-in"})})]}):(0,s.jsxs)(g.W1,{trigger:(0,s.jsxs)(p,{ref:e,children:[(0,s.jsx)(i,{style:m}),(0,s.jsx)(f,{children:r?.name??t.displayName})]}),children:[(0,s.jsx)(g.Dr,{onClick:()=>a(`/users/${t.uid}`),children:(0,s.jsx)(h.Oj,{name:"profile"})}),(0,s.jsx)(g.Dr,{onClick:()=>a("/profile"),children:(0,s.jsx)(h.Oj,{name:"edit-profile"})}),(0,s.jsx)(g.Dr,{onClick:async()=>{await d.j2.signOut()},children:(0,s.jsx)(h.Oj,{name:"sign-out"})})]})}))},18157:(e,t,r)=>{r.d(t,{P:()=>u});var n=r(62540),s=r(20994),o=r(69229),i=r(63696),a=r(48509),l=r(94676),c=r(349),d=r(38946);const u=(0,o.PA)((e=>{let{userId:t}=e;const r=(0,l.g)(),{communitySongStore:o,cloudSongRepository:u,authStore:{authUser:h}}=r,g=(0,s.dj)(),[m,p]=(0,i.useState)(!0),[f,y]=(0,i.useState)([]);return(0,a.Z)((async()=>{try{let e;e=t===h?.uid?await u.getMySongs():await u.getPublicSongsByUser(t),o.songs=e,y(e)}catch(e){g.error(e.message)}finally{p(!1)}}),[t]),m?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.P,{})," Loading..."]}):(0,n.jsx)(d.M,{songs:f})}))},11885:(e,t,r)=>{r.d(t,{j2:()=>c,kA:()=>d});var n=r(64913),s=r(17354),o=r(491),i=r(45271);const a={apiKey:"MISSING_ENV_VAR".FIREBASE_API_KEY,authDomain:"MISSING_ENV_VAR".FIREBASE_AUTH_DOMAIN,projectId:"MISSING_ENV_VAR".FIREBASE_PROJECT_ID,storageBucket:"MISSING_ENV_VAR".FIREBASE_STORAGE_BUCKET,messagingSenderId:"MISSING_ENV_VAR".FIREBASE_MESSAGING_SENDER_ID,appId:"MISSING_ENV_VAR".FIREBASE_APP_ID},l=(()=>{try{const e=(0,n.Wp)(a),t=(0,s.xI)(e);return{app:e,auth:t,firestore:(0,o.aU)(e),functions:(0,i.Uz)(e)}}catch(e){console.warn(`Failed to initialize Firebase: ${e}`)}return{app:null,auth:null,firestore:null,functions:null}})(),c=(l.app,l.auth),d=l.firestore;l.functions},75890:(e,t,r)=>{function n(e){let t=0;return e.map((e=>{const{deltaTime:r,...n}=e;return t+=r,{...n,tick:t}}))}r.d(t,{$:()=>n})},21865:(e,t,r)=>{function n(e){return void 0!==e}r.d(t,{EA:()=>n})},2001:(e,t,r)=>{function n(e,t){const r=window.URL.createObjectURL(e);!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"noname";const r=document.createElement("a");r.href=e,r.download=t,r.style.display="none",document.body.appendChild(r),r.click(),r.remove()}(r,t),setTimeout((()=>window.URL.revokeObjectURL(r)),1e3)}r.d(t,{W:()=>n})},92699:(e,t,r)=>{r.d(t,{a:()=>o});const n=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"}),s=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];function o(e){let t=(e.getTime()-Date.now())/1e3;for(let e=0;e<=s.length;e++){const r=s[e];if(Math.abs(t)<r.amount)return n.format(Math.round(t),r.name);t/=r.amount}throw new Error("")}},48509:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(63696);function s(e,t){(0,n.useEffect)((()=>{e()}),t)}},94676:(e,t,r)=>{r.d(t,{P:()=>s,g:()=>o});var n=r(63696);const s=(0,n.createContext)(null),o=()=>(0,n.useContext)(s)},24838:(e,t,r)=>{r.d(t,{y:()=>i});var n=r(62540),s=r(7470),o=r(36396);function i(){(0,s.H)(document.querySelector("#root")).render((0,n.jsx)(o.q,{}))}},51341:(e,t,r)=>{r.d(t,{M:()=>u,s:()=>d});var n=r(46287),s=r(62540),o=r(47841),i=r(22385);const a=(0,n.A)("div",{target:"epepv8i3"})({name:"13ku56z",styles:"display:flex;flex-direction:column;height:100%"}),l=(0,n.A)("div",{target:"epepv8i2"})({name:"10leoge",styles:"flex-grow:1;overflow-y:auto;flex-basis:0;padding-bottom:2rem"}),c=(0,n.A)("div",{target:"epepv8i1"})({name:"o7wown",styles:"width:80%;max-width:60rem;margin:0 auto"}),d=(0,n.A)("h1",{target:"epepv8i0"})({name:"1bbvr8l",styles:"font-size:2rem;margin-top:2rem;margin-bottom:2rem"}),u=e=>{let{children:t}=e;return(0,s.jsxs)(a,{children:[(0,s.jsx)(i.V,{}),(0,s.jsx)(l,{children:(0,s.jsx)(c,{children:t})}),(0,s.jsx)(o.N,{})]})}},23695:(e,t,r)=>{r.d(t,{A:()=>n});const n={en:{profile:"Profile","edit-profile":"Edit Profile","signin-to-edit-profile":"Please sign in to edit your profile","sign-in":"Sign In","sign-out":"Sign Out","success-sign-in":"Successfully signed in","display-name":"Display Name",bio:"Bio",tracks:"Tracks","recent-tracks":"Recent Tracks","play-count":"plays","play-count-1":"play","song-not-found":"Song not found",download:"Download",share:"Share",save:"Save",close:"Close",cut:"Cut",copy:"Copy",copied:"Copied","created-at":"Created at","published-at":"Published at","updated-at":"Updated at","user-not-found":"User not found","create-new":"Create New","untitled-song":"Untitled song"},fr:{profile:"Profil","edit-profile":"Modifier le Profil","signin-to-edit-profile":"Veuillez vous connecter pour modifier votre profil","sign-in":"Se connecter","sign-out":"Se dÃ©connecter","success-sign-in":"Connection rÃ©ussie","display-name":"Nom Public",bio:"Bio",tracks:"Pistes","recent-tracks":"Pistes RÃ©centes","play-count":"lectures","play-count-1":"lecture","song-not-found":"Musique introuvable",download:"TÃ©lÃ©charger",share:"Partager",save:"Enregistrer",close:"Fermer",cut:"Couper",copy:"Copier",copied:"CopiÃ©","created-at":"CrÃ©Ã© Ã ","published-at":"PubliÃ© Ã ","updated-at":"Mis Ã  jour","user-not-found":"Utilisateur introuvable","create-new":"CrÃ©er une nouvelle musique","untitled-song":"Musique sans titre"},ja:{profile:"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«","edit-profile":"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç·¨é›†","signin-to-edit-profile":"ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç·¨é›†ã™ã‚‹ã«ã¯ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã—ã¦ãã ã•ã„","sign-in":"ã‚µã‚¤ãƒ³ã‚¤ãƒ³","sign-out":"ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆ","success-sign-in":"ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã«æˆåŠŸã—ã¾ã—ãŸ","display-name":"è¡¨ç¤ºå",bio:"è‡ªå·±ç´¹ä»‹",tracks:"ãƒˆãƒ©ãƒƒã‚¯","recent-tracks":"æœ€è¿‘ã®æ›²","play-count":"å›žå†ç”Ÿ","play-count-1":"å›žå†ç”Ÿ","song-not-found":"æ›²ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",download:"ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",share:"å…±æœ‰",save:"ä¿å­˜",close:"é–‰ã˜ã‚‹",cut:"Cut",copy:"ã‚³ãƒ”ãƒ¼",copied:"ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ","created-at":"ä½œæˆæ—¥ ","published-at":"å…¬é–‹æ—¥ ","updated-at":"æ›´æ–°æ—¥ ","user-not-found":"ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“","create-new":"æ–°è¦ä½œæˆ","untitled-song":"ç„¡é¡Œã®æ¥½æ›²"},"zh-Hans":{profile:"Profile","edit-profile":"Edit Profile","signin-to-edit-profile":"Please sign in to edit your profile","sign-in":"ç™»å½•","sign-out":"Sign Out","success-sign-in":"ç™»å½•æˆåŠŸ","display-name":"Display Name",bio:"Bio",tracks:"Tracks","recent-tracks":"Recent Tracks","play-count":"plays","play-count-1":"play","song-not-found":"Song not found",download:"Download",share:"Share",save:"Save",close:"å…³é—­",cut:"Cut",copy:"æ‹·è´",copied:"Copied","created-at":"Created at","published-at":"Published at","updated-at":"Updated at","user-not-found":"User not found","create-new":"Create New","untitled-song":"æœªå‘½å"},"zh-Hant":{profile:"å€‹äººè³‡è¨Š","edit-profile":"ç·¨è¼¯å€‹äººè³‡è¨Š","signin-to-edit-profile":"ç™»å…¥ä»¥ç·¨è¼¯å€‹äººè³‡è¨Š","sign-in":"ç™»å…¥","sign-out":"ç™»å‡º","success-sign-in":"ç™»å…¥æˆåŠŸ","display-name":"é¡¯ç¤ºåç¨±",bio:"è‡ªæˆ‘ä»‹ç´¹",tracks:"éŸ³è»Œ","recent-tracks":"æœ€è¿‘çš„æ›²ç›®","play-count":"plays","play-count-1":"play","song-not-found":"Song not found",download:"Download",share:"Share",save:"å„²å­˜",close:"é—œé–‰",cut:"Cut",copy:"è¤‡è£½",copied:"Copied","created-at":"Created at","published-at":"Published at","updated-at":"Updated at","user-not-found":"User not found","create-new":"Create New","untitled-song":"æœªå‘½å"}}},53902:(e,t,r)=>{r.d(t,{B2:()=>i,Oj:()=>l});var n=r(64478),s=r(23695);const{LocalizationContext:o,useLocalization:i,useCurrentLanguage:a,Localized:l}=(0,n.o)(s.A,"en",[[/^fr/,"fr"],[/^zh-Hans/,"zh-Hans"],[/^zh-Hant/,"zh-Hant"],[/^zh$/,"zh-Hans"],[/^zh-TW$/,"zh-Hant"],[/^zh-HK$/,"zh-Hant"],[/^zh-MO$/,"zh-Hant"],[/^zh-CN$/,"zh-Hans"],[/^zh-SG$/,"zh-Hans"]])},11347:(e,t,r)=>{r.d(t,{R:()=>v});var n=r(46287),s=r(62540),o=r(20994),i=r(69229),a=r(63696),l=r(51349),c=r(68583),d=r(349),u=r(22073),h=r(62158),g=r(48509),m=r(94676),p=r(51341),f=r(53902);const y=(0,n.A)("div",{target:"e1eg79552"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),x=(0,n.A)("label",{target:"e1eg79551"})({name:"1imk9a8",styles:"font-size:1rem;margin-bottom:0.5rem;margin-top:1rem"}),j=(0,n.A)("div",{target:"e1eg79550"})({name:"akdqam",styles:"margin-top:1rem"}),v=(0,i.PA)((()=>{const{authStore:{authUser:e},userRepository:t}=(0,m.g)(),[r,n]=(0,a.useState)(!0),[i,v]=(0,a.useState)(""),[b,w]=(0,a.useState)(""),C=(0,o.dj)();return(0,g.Z)((async()=>{if(e)try{const r=await t.getCurrentUser();if(null!==r)v(r.name),w(r.bio);else{const r={name:e.displayName??"",bio:""};await t.create(r),v(r.name),w(r.bio)}n(!1)}catch(e){C.error(`Failed to load user profile: ${e?.message}`)}}),[e]),e?r?(0,s.jsxs)(p.M,{children:[(0,s.jsx)(p.s,{children:(0,s.jsx)(f.Oj,{name:"edit-profile"})}),(0,s.jsx)(d.P,{})]}):(0,s.jsxs)(p.M,{children:[(0,s.jsx)(p.s,{children:(0,s.jsx)(f.Oj,{name:"edit-profile"})}),(0,s.jsxs)(y,{children:[(0,s.jsx)(x,{children:(0,s.jsx)(f.Oj,{name:"display-name"})}),(0,s.jsx)(h.A,{type:"text",value:i,onChange:e=>{v(e.target.value)}}),(0,s.jsx)(x,{children:(0,s.jsx)(f.Oj,{name:"bio"})}),(0,s.jsx)(u.f,{value:b,onChange:e=>{w(e.target.value)}}),(0,s.jsx)(j,{children:(0,s.jsx)(c.j,{onClick:async()=>{try{await t.update({name:i,bio:b}),C.success("Successfully updated profile")}catch(e){C.error(`Failed to update profile: ${e?.message}`)}},children:(0,s.jsx)(f.Oj,{name:"save"})})})]})]}):(0,s.jsxs)(p.M,{children:[(0,s.jsx)(p.s,{children:(0,s.jsx)(f.Oj,{name:"edit-profile"})}),(0,s.jsx)(l.F,{severity:"warning",children:(0,s.jsx)(f.Oj,{name:"signin-to-edit-profile"})})]})}))},22709:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(62540),s=r(16757),o=r(51341),i=r(53902);const a=()=>(0,n.jsxs)(o.M,{children:[(0,n.jsx)(o.s,{children:(0,n.jsx)(i.Oj,{name:"recent-tracks"})}),(0,n.jsx)(s.l,{})]})},18811:(e,t,r)=>{r.d(t,{x:()=>D});var n=r(46287),s=r(62540),o=r(20994),i=r(89448),a=r(67235),l=r(90023),c=r(69229),d=r(63696),u=r(98914),h=r(48302),g=r(35641),m=r(51349),p=r(60327),f=r(68583),y=r(349),x=r(67984),j=r(2001),v=r(48509),b=r(94676),w=r(51341),C=r(53902);const k=(0,n.A)("h1",{target:"exj5gz810"})({name:"innw22",styles:"margin:0;font-size:300%"}),S=(0,n.A)("p",{target:"exj5gz89"})("color:",(e=>{let{theme:t}=e;return t.secondaryTextColor}),";margin:0.25rem 0 0 0;"),A=(0,n.A)("a",{target:"exj5gz88"})({name:"ld6o3c",styles:"color:currentColor;text-decoration:none;&:hover{text-decoration:underline;}"}),P=(0,n.A)("div",{target:"exj5gz87"})({name:"7gboz2",styles:"display:flex;align-items:center;margin-bottom:2rem;margin-top:4rem"}),_=(0,n.A)("div",{target:"exj5gz86"})({name:"1mys3sh",styles:"margin-left:1rem"}),O=(0,n.A)("div",{target:"exj5gz85"})(""),E=(0,n.A)("div",{target:"exj5gz84"})("color:",(e=>{let{theme:t}=e;return t.secondaryTextColor}),";margin-bottom:0.5rem;"),T=(0,n.A)("div",{target:"exj5gz83"})({name:"1evwmll",styles:"display:flex;margin-bottom:1rem"}),I=(0,n.A)(f.$,{target:"exj5gz82"})("background:",(e=>{let{theme:t}=e;return t.secondaryBackgroundColor}),";margin-right:0.5rem;"),R=(0,n.A)("div",{target:"exj5gz81"})({name:"8dk3vg",styles:"margin-bottom:1rem"}),z=(0,n.A)("div",{target:"exj5gz80"})("display:flex;align-items:center;margin-right:1rem;color:",(e=>{let{theme:t}=e;return t.secondaryTextColor}),";"),D=(0,c.PA)((e=>{let{songId:t}=e;const r=(0,b.g)(),{cloudSongRepository:n,cloudSongDataRepository:c,player:f,songStore:{currentSong:D}}=r,[M,F]=(0,d.useState)(!0),[U,N]=(0,d.useState)(null),[L,H]=(0,d.useState)(null),[B,$]=(0,d.useState)(!1),G=(0,o.dj)(),V=f.isPlaying&&null!==U&&D?.metadata.id===U.id;return(0,v.Z)((async()=>{try{const e=await n.get(t);N(e),F(!1)}catch(e){H(e)}}),[t]),M?(0,s.jsxs)(w.M,{children:[(0,s.jsx)(w.s,{children:"Song"}),(0,s.jsx)(y.P,{})," Loading..."]}):null!==L?(0,s.jsxs)(w.M,{children:[(0,s.jsx)(w.s,{children:"Song"}),(0,s.jsxs)(m.F,{severity:"warning",children:["Failed to load song: ",L.message]})]}):null===U?(0,s.jsxs)(w.M,{children:[(0,s.jsx)(w.s,{children:"Song"}),(0,s.jsx)(m.F,{severity:"warning",children:(0,s.jsx)(C.Oj,{name:"song-not-found"})})]}):(0,s.jsxs)(w.M,{children:[(0,s.jsx)(u.mg,{children:(0,s.jsx)("title",{children:`${U.name} - signal`})}),(0,s.jsxs)(P,{children:[(0,s.jsx)(p.F,{isPlaying:V,onMouseDown:()=>{if(null!==U)if(f.isPlaying&&D?.metadata.id===U.id)f.stop();else try{(0,g.m7)(r)(U)}catch(e){G.error(`Failed to play: ${e.message}`)}}}),(0,s.jsxs)(_,{children:[(0,s.jsx)(k,{style:{marginBottom:0},children:U.name}),U.user&&(0,s.jsxs)(S,{children:["by"," ",(0,s.jsx)(h.N_,{href:`/users/${U.user.id}`,style:{color:"currentColor",textDecoration:"none"},children:(0,s.jsx)(A,{children:U.user.name})})]})]})]}),(0,s.jsxs)(O,{children:[(0,s.jsx)(R,{children:(0,s.jsxs)(z,{children:[(0,s.jsx)(a,{size:14,style:{marginRight:"0.25rem"}}),U.playCount??0," ",1===U.playCount?(0,s.jsx)(C.Oj,{name:"play-count-1"}):(0,s.jsx)(C.Oj,{name:"play-count"})]})}),(0,s.jsxs)(T,{children:[(0,s.jsxs)(I,{onClick:async()=>{if(null===U)return;const e=await c.get(U.songDataId),t=new Blob([e],{type:"application/octet-stream"}),r=`${U.name.replace(/[\\/:"*?<>|]/g,"_")}.mid`;(0,j.W)(t,r)},children:[(0,s.jsx)(i,{size:"1rem",style:{marginRight:"0.5rem"}}),(0,s.jsx)(C.Oj,{name:"download"})]}),(0,s.jsxs)(I,{onClick:()=>$(!0),children:[(0,s.jsx)(l,{size:"1rem",style:{marginRight:"0.5rem"}}),(0,s.jsx)(C.Oj,{name:"share"})]})]}),(0,s.jsxs)(E,{children:[(0,s.jsx)(C.Oj,{name:"created-at"})," ",U.createdAt.toLocaleString()]}),U.publishedAt&&(0,s.jsxs)(E,{children:[(0,s.jsx)(C.Oj,{name:"published-at"})," ",U.publishedAt.toLocaleString()]}),(0,s.jsxs)(E,{children:[(0,s.jsx)(C.Oj,{name:"updated-at"})," ",U.updatedAt.toLocaleString()]})]}),(0,s.jsx)(x.G,{open:B,onClose:()=>$(!1),song:U})]})}))},37917:(e,t,r)=>{r.d(t,{x:()=>y});var n=r(46287),s=r(62540),o=r(69229),i=r(63696),a=r(98914),l=r(51349),c=r(349),d=r(18157),u=r(48509),h=r(94676),g=r(51341),m=r(53902);const p=(0,n.A)("p",{target:"ej4b8rr1"})({name:"akdqam",styles:"margin-top:1rem"}),f=(0,n.A)("h2",{target:"ej4b8rr0"})({name:"13216ay",styles:"margin-top:2rem;font-size:1.5rem;margin-bottom:0.5rem"}),y=(0,o.PA)((e=>{let{userId:t}=e;const{userRepository:r}=(0,h.g)(),[n,o]=(0,i.useState)(!0),[y,x]=(0,i.useState)(null),[j,v]=(0,i.useState)(null);return(0,u.Z)((async()=>{try{const e=await r.get(t);x(e),o(!1)}catch(e){v(e)}}),[t]),n?(0,s.jsxs)(g.M,{children:[(0,s.jsx)(g.s,{children:"User"}),(0,s.jsx)(c.P,{})," Loading..."]}):null!==j?(0,s.jsxs)(g.M,{children:[(0,s.jsx)(g.s,{children:"User"}),(0,s.jsxs)(l.F,{severity:"warning",children:["Failed to load user profile: ",j.message]})]}):null===y?(0,s.jsxs)(g.M,{children:[(0,s.jsx)(g.s,{children:"User"}),(0,s.jsx)(l.F,{severity:"warning",children:(0,s.jsx)(m.Oj,{name:"user-not-found"})})]}):(0,s.jsxs)(g.M,{children:[(0,s.jsx)(a.mg,{children:(0,s.jsx)("title",{children:`${y.name} - signal`})}),(0,s.jsx)(g.s,{children:y.name}),(0,s.jsx)(p,{children:y.bio}),(0,s.jsx)(f,{children:(0,s.jsx)(m.Oj,{name:"tracks"})}),(0,s.jsx)(d.P,{userId:t})]})}))},4786:(e,t,r)=>{r.d(t,{GD:()=>a});var n=r(65075),s=r(13459),o=r(21865),i=r(62560);class a{songProvider;constructor(e){this.songProvider=e}get timebase(){return this.songProvider.song.timebase}get endOfSong(){return this.songProvider.song.endOfSong}getEvents(e,t){return this.songProvider.song.tracks.flatMap((r=>r.events.filter(((e,t)=>r=>r.tick>=e&&r.tick<t)(e,t)).map((e=>({...e,trackId:-1})))))}getCurrentStateEvents(e){return this.songProvider.song.tracks.flatMap((t=>d(t.events,e).map((e=>({...e,trackId:-1})))))}}const l=e=>n(e,(e=>e.tick)),c=e=>t=>t.tick<=e,d=(e,t)=>{const r=e.filter(i.Hq).filter(c(t));return[...s(r.map((e=>e.controllerType))).map((e=>l(r.filter((0,i.HG)(e))))).filter(o.EA),l(e.filter(i.u3).filter(c(t))),l(e.filter(i.Xz).filter(c(t))),l(e.filter(i.Y6).filter(c(t)))].filter(o.EA)}},60589:(e,t,r)=>{r.d(t,{M:()=>o,p:()=>i});var n=r(75890),s=r(4805);class o{timebase;endOfSong;tracks;constructor(e){this.timebase=e.header.ticksPerBeat,this.tracks=e.tracks.map((e=>{const t=(0,n.$)(e);return{events:t,endOfTrack:(0,s.s)(t)}})),this.endOfSong=this.tracks.map((e=>e.endOfTrack)).reduce(((e,t)=>Math.max(e,t)),0)}}const i=()=>new o({header:{ticksPerBeat:480},tracks:[]})},62560:(e,t,r)=>{r.d(t,{HG:()=>a,Hq:()=>i,Xz:()=>n,Y6:()=>s,u3:()=>o});const n=e=>"subtype"in e&&"programChange"===e.subtype,s=e=>"subtype"in e&&"pitchBend"===e.subtype,o=e=>"subtype"in e&&"setTempo"===e.subtype,i=e=>"subtype"in e&&"controller"===e.subtype,a=e=>t=>i(t)&&t.controllerType===e;a(7),a(10),a(1),a(11)},82594:(e,t,r)=>{r.d(t,{a:()=>s});var n=r(89193);class s{userRepository;authUser=null;user=null;constructor(e){this.userRepository=e,(0,n.Gn)(this,{authUser:n.sH,user:n.sH});let t=null;try{e.observeAuthUser((async r=>{this.authUser=r,t?.(),null!==r&&(t=e.observeCurrentUser((e=>{this.user=e})),await this.createProfileIfNeeded(r))}))}catch(e){console.warn(e)}}async createProfileIfNeeded(e){if(null===await this.userRepository.getCurrentUser()){const t={name:e.displayName??"",bio:""};await this.userRepository.create(t)}}get isLoggedIn(){return null!==this.authUser}}},596:(e,t,r)=>{r.d(t,{K:()=>s});var n=r(89193);class s{songs=[];constructor(){(0,n.Gn)(this,{songs:n.sH})}}},57852:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(69825),s=r(1902),o=r(11885),i=r(4786),a=r(82594),l=r(596),c=r(75647),d=r(81043);class u{userRepository=(()=>(0,n._x)(o.kA,o.j2))();cloudSongRepository=(()=>(0,n.XW)(o.kA,o.j2))();cloudSongDataRepository=(()=>(0,n.TA)(o.kA,o.j2))();songStore=(()=>new d.n(this.cloudSongDataRepository))();authStore=(()=>new a.a(this.userRepository))();communitySongStore=(()=>new l.K)();rootViewStore=(()=>new c.A)();player;synth;constructor(){const e=new(window.AudioContext||window.webkitAudioContext);this.synth=new s.Fu(e);const t=new i.GD(this.songStore);this.player=new s.ai(this.synth,t)}}},75647:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(89193);class s{openSignInDialog=!1;constructor(){(0,n.Gn)(this,{openSignInDialog:n.sH})}}},81043:(e,t,r)=>{r.d(t,{n:()=>i});var n=r(10962),s=r(89193),o=r(60589);class i{songDataRepository;currentSong=null;isLoading=!1;constructor(e){this.songDataRepository=e,(0,s.Gn)(this,{song:s.EW,currentSong:s.sH,isLoading:s.sH})}get song(){return this.currentSong?.song??(0,o.p)()}async loadSong(e){this.isLoading=!0;const t=await this.songDataRepository.get(e.songDataId),r=new o.M((0,n.LF)(t));this.currentSong={song:r,metadata:e},this.isLoading=!1}}},27053:(e,t,r)=>{r.d(t,{z:()=>n});const n={font:"Inter, -apple-system, BlinkMacSystemFont, Avenir, Lato",canvasFont:"Arial",themeColor:"hsl(230, 70%, 55%)",textColor:"#ffffff",secondaryTextColor:"hsl(223, 12%, 60%)",tertiaryTextColor:"#5a6173",dividerColor:"hsl(224, 12%, 24%)",darkBackgroundColor:"hsl(228, 10%, 13%)",backgroundColor:"hsl(228, 10%, 16%)",secondaryBackgroundColor:"hsl(227, 10%, 22%)",shadowColor:"rgba(0, 0, 0, 0.2)",highlightColor:"#8388a51a",greenColor:"#31DE53",redColor:"#DE5267",yellowColor:"#DEB126"}},4805:(e,t,r)=>{r.d(t,{s:()=>s});var n=r(17243);function s(e){return(0,n.max)(e.map((e=>e.tick)))??0}},20994:(e,t,r)=>{r.d(t,{dj:()=>n.dj,tE:()=>n.tE}),r(16829),r(80302),r(16959);var n=r(45582)},16829:(e,t,r)=>{r(62540),r(63696)},80302:(e,t,r)=>{r(62540),r(63696)},16959:(e,t,r)=>{r(62540),r(63696)},45582:(e,t,r)=>{r.d(t,{dj:()=>a,tE:()=>i});var n=r(62540),s=r(63696);const o=(0,s.createContext)(null),i=e=>{let{children:t,component:r}=e;const[i,a]=(0,s.useState)([]);return(0,n.jsxs)(o.Provider,{value:{addMessage(e){a((t=>[...t,e]))}},children:[t,i.map((e=>(0,n.jsx)(r,{message:e.message,severity:e.severity,onExited:()=>{return t=e.key,a((e=>e.filter((e=>e.key!==t))));var t}},e.key)))]})},a=()=>{const{addMessage:e}=(0,s.useContext)(o),t=(t,r)=>{e({message:t,...r,key:(new Date).getTime()})};return{show:t,info(e){t(e,{severity:"info"})},success(e){t(e,{severity:"success"})},warning(e){t(e,{severity:"warning"})},error(e){t(e,{severity:"error"})}}}},77267:(e,t,r)=>{r.d(t,{S:()=>a});var n=r(62540),s=r(17354),o=r(79160),i=r(63696);const a=e=>{let{uiConfig:t,firebaseAuth:r,uiCallback:a,className:l,style:c}=e;const[d,u]=(0,i.useState)(!1),h=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const e=o.auth.AuthUI.getInstance()||new o.auth.AuthUI(r);"popup"===t.signInFlow&&e.reset();const n=(0,s.hg)(r,(t=>{!t&&d&&e.reset(),u(!!t)}));return a&&a(e),e.start(h.current,t),()=>{n(),e.reset()}}),[o,t]),(0,n.jsx)("div",{ref:h,className:l,style:c})}},6205:(e,t,r)=>{r.d(t,{a:()=>s});var n=r(40889);class s{lookAheadTime=100;timebase=480;loop=null;_currentTick=0;_scheduledTick=0;_prevTime=void 0;_getEvents;_createLoopEndEvents;constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:480,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;this._getEvents=e,this._createLoopEndEvents=t,this._currentTick=r,this._scheduledTick=r,this.timebase=n,this.lookAheadTime=s}get scheduledTick(){return this._scheduledTick}millisecToTick(e,t){return e/1e3*t/60*this.timebase}seek(e){this._currentTick=this._scheduledTick=Math.max(0,e)}readNextEvents(e,t){const r=r=>s=>{const o=s.tick-r;return{event:s,timestamp:t+Math.max(0,(0,n.b)(o,e,this.timebase))}},s=(e,t,n)=>this._getEvents(e,t).map(r(n));void 0===this._prevTime&&(this._prevTime=t);const o=t-this._prevTime,i=Math.max(0,this.millisecToTick(o,e)),a=this._currentTick+i,l=this.millisecToTick(this.lookAheadTime,e),c=this._scheduledTick,d=a+l;if(this._prevTime=t,null!==this.loop&&c<this.loop.end&&d>=this.loop.end){const e=this.loop,t=d-e.end,n=e.begin+t,o=e.begin-(e.end-a);return this._currentTick=o,this._scheduledTick=n,[...s(c,e.end,a),...this._createLoopEndEvents().map((t=>r(o)({...t,tick:e.begin}))),...s(e.begin,n,o)]}return this._currentTick=a,this._scheduledTick=d,s(c,d,a)}}},70467:(e,t,r)=>{function n(e,t,r,n){return{deltaTime:e,type:"channel",subtype:"controller",channel:t,controllerType:r,value:n}}r.d(t,{Q:()=>n})},94801:(e,t,r)=>{r.d(t,{a:()=>c});var n=r(53649),s=r(32858),o=r(10962),i=r(89193),a=r(6205),l=r(70467);class c{output;eventSource;scheduler=null;interval=null;_currentTempo=120;_currentTick=0;_isPlaying=!1;disableSeek=!1;loop=null;constructor(e,t){this.output=e,this.eventSource=t,(0,i.Gn)(this,{_currentTick:i.sH,_isPlaying:i.sH,loop:i.sH,position:i.EW,isPlaying:i.EW})}play(){this.isPlaying?console.warn("called play() while playing. aborted."):(this.scheduler=new a.a(((e,t)=>this.eventSource.getEvents(e,t)),(()=>this.allNotesOffEvents()),this._currentTick,this.eventSource.timebase,100),this._isPlaying=!0,this.output.activate(),this.interval=window.setInterval((()=>this._onTimer()),50),this.output.activate())}set position(e){Number.isInteger(e)||console.warn("Player.tick should be an integer",e),this.disableSeek||(e=Math.min(Math.max(Math.floor(e),0),this.eventSource.endOfSong),this.scheduler&&this.scheduler.seek(e),this._currentTick=e,this.isPlaying&&this.allSoundsOff(),this.sendCurrentStateEvents())}get position(){return this._currentTick}get isPlaying(){return this._isPlaying}get numberOfChannels(){return 15}allSoundsOffChannel(e){this.sendEvent((0,l.Q)(0,e,o.M$.ALL_SOUNDS_OFF,0))}allSoundsOff(){for(const e of n(0,this.numberOfChannels))this.allSoundsOffChannel(e)}allSoundsOffExclude(e){for(const t of n(0,this.numberOfChannels))t!==e&&this.allSoundsOffChannel(t)}allNotesOffEvents(){return n(0,this.numberOfChannels).map((e=>({...(0,l.Q)(0,e,o.M$.ALL_NOTES_OFF,0),trackId:-1})))}resetControllers(){for(const e of n(0,this.numberOfChannels))this.sendEvent((0,l.Q)(0,e,o.M$.RESET_CONTROLLERS,127))}stop(){this.scheduler=null,this.allSoundsOff(),this._isPlaying=!1,null!==this.interval&&(clearInterval(this.interval),this.interval=null)}reset(){this.resetControllers(),this.stop(),this._currentTick=0}sendCurrentStateEvents(){this.eventSource.getCurrentStateEvents(this._currentTick).forEach((e=>{this.applyPlayerEvent(e),this.sendEvent(e)}))}get currentTempo(){return this._currentTempo}set currentTempo(e){this._currentTempo=e}sendEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now(),n=arguments.length>3?arguments[3]:void 0;this.output.sendEvent(e,t,r,n)}syncPosition=(()=>s((()=>{null!==this.scheduler&&(this._currentTick=this.scheduler.scheduledTick)}),50))();applyPlayerEvent(e){"channel"!==e.type&&"subtype"in e&&"setTempo"===e.subtype&&(this._currentTempo=6e7/e.microsecondsPerBeat)}_onTimer(){if(null===this.scheduler)return;const e=performance.now();this.scheduler.loop=null!==this.loop&&this.loop.enabled?this.loop:null,this.scheduler.readNextEvents(this._currentTempo,e).forEach((t=>{let{event:r,timestamp:n}=t;if("channel"===r.type){const t=(n-e)/1e3;this.sendEvent(r,t,e,r.trackId)}else this.applyPlayerEvent(r)})),this.scheduler.scheduledTick>=this.eventSource.endOfSong&&this.stop(),this.syncPosition()}playOrPause(){this.isPlaying?this.stop():this.play()}setLoopBegin(e){this.loop={end:Math.max(e,this.loop?.end??e),enabled:this.loop?.enabled??!1,begin:e}}setLoopEnd(e){this.loop={begin:Math.min(e,this.loop?.begin??e),enabled:this.loop?.enabled??!1,end:e}}toggleEnableLoop(){null!==this.loop&&(this.loop={...this.loop,enabled:!this.loop.enabled})}}},70012:(e,t,r)=>{r.d(t,{F:()=>s});var n=r(15172);class s{context;synth=null;_loadedSoundFontData=null;get loadedSoundFontData(){return this._loadedSoundFontData}get isLoaded(){return null!==this._loadedSoundFontData}sequenceNumber=0;constructor(e){this.context=e}async setup(){const e=new URL(r(55570),r.b);await this.context.audioWorklet.addModule(e)}async loadSoundFontFromURL(e){const t=await fetch(e),r=await t.arrayBuffer();await this.loadSoundFont(r)}async loadSoundFont(e){null!==this.synth&&this.synth.disconnect(),this.synth=new AudioWorkletNode(this.context,"synth-processor",{numberOfInputs:0,outputChannelCount:[2]}),this.synth.connect(this.context.destination),this.sequenceNumber=0;const t=(0,n.AM)(new Uint8Array(e));this._loadedSoundFontData=e;for(const e of t)this.postSynthMessage(e.event,e.transfer)}postSynthMessage(e,t){this.synth?.port.postMessage({...e,sequenceNumber:this.sequenceNumber++},t??[])}sendEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.postSynthMessage({type:"midi",midi:e,delayTime:t*this.context.sampleRate})}activate(){this.context.resume()}}},1902:(e,t,r)=>{r.d(t,{Fu:()=>s.F,ai:()=>n.a});var n=r(94801),s=r(70012);r(52516)},52516:(e,t,r)=>{r(15172)},40889:(e,t,r)=>{function n(e,t,r){return e/(r/60)/t*1e3}r.d(t,{b:()=>n})}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=n,o.amdD=function(){throw new Error("define cannot be used indirect")},e=[],o.O=(t,r,n,s)=>{if(!r){var i=1/0;for(d=0;d<e.length;d++){for(var[r,n,s]=e[d],a=!0,l=0;l<r.length;l++)(!1&s||i>=s)&&Object.keys(o.O).every((e=>o.O[e](r[l])))?r.splice(l--,1):(a=!1,s<i&&(i=s));if(a){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,n,s]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var s=Object.create(null);o.r(s);var i={};t=t||[null,r({}),r([]),r(r)];for(var a=2&n&&e;"object"==typeof a&&!~t.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(s,i),s},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{o.b=document.baseURI||self.location.href;var e={352:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[i,a,l]=r,c=0;if(i.some((t=>0!==e[t]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(l)var d=l(o)}for(t&&t(r);c<i.length;c++)s=i[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},r=self.webpackChunksignal=self.webpackChunksignal||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),o.nc=void 0;var i=o.O(void 0,[422,929,248,158],(()=>o(89546)));i=o.O(i)})();